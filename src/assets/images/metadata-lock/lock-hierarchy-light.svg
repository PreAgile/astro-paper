<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 520" style="font-family: 'Segoe UI', system-ui, sans-serif;">
  <defs>
    <marker id="arrowhead-light" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
    <filter id="shadow-light" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="700" height="520" fill="#ffffff"/>

  <!-- Title -->
  <text x="350" y="35" text-anchor="middle" font-size="20" font-weight="600" fill="#1e1e1e">MySQL Lock Hierarchy</text>

  <!-- Global Lock -->
  <g filter="url(#shadow-light)">
    <rect x="150" y="60" width="400" height="55" rx="10" fill="#f3f4f6" stroke="#9ca3af" stroke-width="2"/>
    <text x="350" y="85" text-anchor="middle" font-size="14" font-weight="600" fill="#374151">Global Lock</text>
    <text x="350" y="105" text-anchor="middle" font-size="11" fill="#6b7280">FLUSH TABLES WITH READ LOCK</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="115" x2="350" y2="135" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead-light)"/>

  <!-- Schema Lock -->
  <g filter="url(#shadow-light)">
    <rect x="150" y="140" width="400" height="55" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
    <text x="350" y="165" text-anchor="middle" font-size="14" font-weight="600" fill="#1e40af">Schema Lock</text>
    <text x="350" y="185" text-anchor="middle" font-size="11" fill="#3b82f6">Database Level</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="195" x2="350" y2="215" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead-light)"/>

  <!-- Metadata Lock - Highlighted -->
  <g filter="url(#shadow-light)">
    <rect x="120" y="220" width="460" height="80" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="3"/>
    <text x="350" y="250" text-anchor="middle" font-size="16" font-weight="700" fill="#92400e">⭐ Metadata Lock (MDL)</text>
    <text x="350" y="275" text-anchor="middle" font-size="12" fill="#b45309">DDL vs DML 충돌 방지 | 트랜잭션 종료까지 유지</text>
    <text x="570" y="240" text-anchor="end" font-size="11" font-weight="600" fill="#dc2626">← 오늘의 주인공!</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="300" x2="350" y2="320" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead-light)"/>

  <!-- Table Lock -->
  <g filter="url(#shadow-light)">
    <rect x="150" y="325" width="400" height="55" rx="10" fill="#e0e7ff" stroke="#6366f1" stroke-width="2"/>
    <text x="350" y="350" text-anchor="middle" font-size="14" font-weight="600" fill="#4338ca">Table Lock</text>
    <text x="350" y="370" text-anchor="middle" font-size="11" fill="#6366f1">LOCK TABLES (명시적)</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="380" x2="350" y2="400" stroke="#374151" stroke-width="2" marker-end="url(#arrowhead-light)"/>

  <!-- Row Lock -->
  <g filter="url(#shadow-light)">
    <rect x="150" y="405" width="400" height="55" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
    <text x="350" y="430" text-anchor="middle" font-size="14" font-weight="600" fill="#065f46">Row Lock</text>
    <text x="350" y="450" text-anchor="middle" font-size="11" fill="#10b981">InnoDB Record Level (가장 익숙한 잠금)</text>
  </g>

  <!-- Side annotation -->
  <text x="620" y="330" text-anchor="start" font-size="10" fill="#6b7280">상위 잠금이</text>
  <text x="620" y="345" text-anchor="start" font-size="10" fill="#6b7280">하위 잠금보다</text>
  <text x="620" y="360" text-anchor="start" font-size="10" fill="#6b7280">더 넓은 범위</text>

  <!-- Bottom note -->
  <rect x="150" y="475" width="400" height="35" rx="5" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="350" y="497" text-anchor="middle" font-size="12" fill="#dc2626">MDL은 Row Lock과 독립적으로 동작 - SELECT도 MDL 획득!</text>
</svg>