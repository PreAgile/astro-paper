<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" style="font-family: 'Segoe UI', system-ui, sans-serif;">
  <defs>
    <marker id="arrow-dark" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#eaedf3"/>
    </marker>
    <filter id="shadow-d" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="800" height="400" fill="#212737"/>

  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-size="20" font-weight="600" fill="#eaedf3">Convoy Effect - MDL 대기 큐 (FIFO)</text>

  <!-- Queue box -->
  <rect x="50" y="70" width="700" height="200" rx="15" fill="#2d3548" stroke="#4b5563" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="70" y="95" font-size="12" fill="#9ca3af">MDL 대기 큐</text>

  <!-- Session A - Running -->
  <g filter="url(#shadow-d)">
    <rect x="80" y="120" width="130" height="120" rx="10" fill="#14532d" stroke="#51cf66" stroke-width="2"/>
    <text x="145" y="150" text-anchor="middle" font-size="13" font-weight="600" fill="#51cf66">Session A</text>
    <text x="145" y="172" text-anchor="middle" font-size="11" fill="#69db7c">SELECT ...</text>
    <text x="145" y="195" text-anchor="middle" font-size="10" fill="#adb5bd">MDL_SHARED</text>
    <rect x="95" y="210" width="80" height="20" rx="4" fill="#51cf66"/>
    <text x="135" y="224" text-anchor="middle" font-size="10" font-weight="600" fill="#14532d">실행 중 ✓</text>
  </g>

  <!-- Arrow -->
  <line x1="215" y1="180" x2="245" y2="180" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrow-dark)"/>

  <!-- ALTER TABLE - Waiting -->
  <g filter="url(#shadow-d)">
    <rect x="250" y="120" width="150" height="120" rx="10" fill="#5c4813" stroke="#ffd43b" stroke-width="3"/>
    <text x="325" y="150" text-anchor="middle" font-size="13" font-weight="600" fill="#ffd43b">ALTER TABLE</text>
    <text x="325" y="172" text-anchor="middle" font-size="11" fill="#ffe066">ADD COLUMN</text>
    <text x="325" y="195" text-anchor="middle" font-size="10" fill="#fcc419">MDL_EXCLUSIVE</text>
    <rect x="265" y="210" width="80" height="20" rx="4" fill="#ffd43b"/>
    <text x="305" y="224" text-anchor="middle" font-size="10" font-weight="600" fill="#5c4813">대기 중 ⏳</text>
  </g>

  <!-- Arrow -->
  <line x1="405" y1="180" x2="435" y2="180" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrow-dark)"/>

  <!-- Session B - Blocked -->
  <g filter="url(#shadow-d)">
    <rect x="440" y="120" width="130" height="120" rx="10" fill="#4a1e1e" stroke="#ff6b6b" stroke-width="2"/>
    <text x="505" y="150" text-anchor="middle" font-size="13" font-weight="600" fill="#ff6b6b">Session B</text>
    <text x="505" y="172" text-anchor="middle" font-size="11" fill="#ffa8a8">SELECT ...</text>
    <text x="505" y="195" text-anchor="middle" font-size="10" fill="#adb5bd">MDL_SHARED</text>
    <rect x="455" y="210" width="80" height="20" rx="4" fill="#ff6b6b"/>
    <text x="495" y="224" text-anchor="middle" font-size="10" font-weight="600" fill="#4a1e1e">대기 중 ⏳</text>
  </g>

  <!-- Arrow -->
  <line x1="575" y1="180" x2="605" y2="180" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrow-dark)"/>

  <!-- Session C - Blocked -->
  <g filter="url(#shadow-d)">
    <rect x="610" y="120" width="120" height="120" rx="10" fill="#4a1e1e" stroke="#ff6b6b" stroke-width="2"/>
    <text x="670" y="150" text-anchor="middle" font-size="13" font-weight="600" fill="#ff6b6b">Session C</text>
    <text x="670" y="172" text-anchor="middle" font-size="11" fill="#ffa8a8">INSERT ...</text>
    <text x="670" y="195" text-anchor="middle" font-size="10" fill="#adb5bd">MDL_SHARED_WRITE</text>
    <rect x="620" y="210" width="80" height="20" rx="4" fill="#ff6b6b"/>
    <text x="660" y="224" text-anchor="middle" font-size="10" font-weight="600" fill="#4a1e1e">대기 중 ⏳</text>
  </g>

  <!-- Explanation box -->
  <rect x="50" y="290" width="700" height="95" rx="10" fill="#4a1e1e" stroke="#ff6b6b" stroke-width="2"/>

  <text x="70" y="320" font-size="14" font-weight="600" fill="#ff6b6b">⚠️ 왜 SELECT도 막히는가?</text>
  <text x="70" y="345" font-size="12" fill="#ffa8a8">• MDL은 FIFO(선입선출) 큐 방식으로 동작</text>
  <text x="70" y="365" font-size="12" fill="#ffa8a8">• EXCLUSIVE 요청이 큐에 있으면, 뒤의 SHARED 요청도 대기해야 함</text>
  <text x="70" y="385" font-size="12" fill="#ffa8a8">• 이유: DDL의 기아(Starvation) 방지를 위한 공정성 설계</text>
</svg>