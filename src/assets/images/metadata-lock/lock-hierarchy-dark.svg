<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 520" style="font-family: 'Segoe UI', system-ui, sans-serif;">
  <defs>
    <marker id="arrowhead-dark" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#eaedf3"/>
    </marker>
    <filter id="shadow-dark" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="700" height="520" fill="#212737"/>

  <!-- Title -->
  <text x="350" y="35" text-anchor="middle" font-size="20" font-weight="600" fill="#eaedf3">MySQL Lock Hierarchy</text>

  <!-- Global Lock -->
  <g filter="url(#shadow-dark)">
    <rect x="150" y="60" width="400" height="55" rx="10" fill="#374151" stroke="#6b7280" stroke-width="2"/>
    <text x="350" y="85" text-anchor="middle" font-size="14" font-weight="600" fill="#e5e7eb">Global Lock</text>
    <text x="350" y="105" text-anchor="middle" font-size="11" fill="#9ca3af">FLUSH TABLES WITH READ LOCK</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="115" x2="350" y2="135" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrowhead-dark)"/>

  <!-- Schema Lock -->
  <g filter="url(#shadow-dark)">
    <rect x="150" y="140" width="400" height="55" rx="10" fill="#1e3a5f" stroke="#4dabf7" stroke-width="2"/>
    <text x="350" y="165" text-anchor="middle" font-size="14" font-weight="600" fill="#4dabf7">Schema Lock</text>
    <text x="350" y="185" text-anchor="middle" font-size="11" fill="#74c0fc">Database Level</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="195" x2="350" y2="215" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrowhead-dark)"/>

  <!-- Metadata Lock - Highlighted -->
  <g filter="url(#shadow-dark)">
    <rect x="120" y="220" width="460" height="80" rx="10" fill="#5c4813" stroke="#ffd43b" stroke-width="3"/>
    <text x="350" y="250" text-anchor="middle" font-size="16" font-weight="700" fill="#ffd43b">⭐ Metadata Lock (MDL)</text>
    <text x="350" y="275" text-anchor="middle" font-size="12" fill="#ffe066">DDL vs DML 충돌 방지 | 트랜잭션 종료까지 유지</text>
    <text x="570" y="240" text-anchor="end" font-size="11" font-weight="600" fill="#ff6b6b">← 오늘의 주인공!</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="300" x2="350" y2="320" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrowhead-dark)"/>

  <!-- Table Lock -->
  <g filter="url(#shadow-dark)">
    <rect x="150" y="325" width="400" height="55" rx="10" fill="#312e81" stroke="#a5b4fc" stroke-width="2"/>
    <text x="350" y="350" text-anchor="middle" font-size="14" font-weight="600" fill="#c7d2fe">Table Lock</text>
    <text x="350" y="370" text-anchor="middle" font-size="11" fill="#a5b4fc">LOCK TABLES (명시적)</text>
  </g>

  <!-- Arrow -->
  <line x1="350" y1="380" x2="350" y2="400" stroke="#eaedf3" stroke-width="2" marker-end="url(#arrowhead-dark)"/>

  <!-- Row Lock -->
  <g filter="url(#shadow-dark)">
    <rect x="150" y="405" width="400" height="55" rx="10" fill="#14532d" stroke="#51cf66" stroke-width="2"/>
    <text x="350" y="430" text-anchor="middle" font-size="14" font-weight="600" fill="#51cf66">Row Lock</text>
    <text x="350" y="450" text-anchor="middle" font-size="11" fill="#69db7c">InnoDB Record Level (가장 익숙한 잠금)</text>
  </g>

  <!-- Side annotation -->
  <text x="620" y="330" text-anchor="start" font-size="10" fill="#adb5bd">상위 잠금이</text>
  <text x="620" y="345" text-anchor="start" font-size="10" fill="#adb5bd">하위 잠금보다</text>
  <text x="620" y="360" text-anchor="start" font-size="10" fill="#adb5bd">더 넓은 범위</text>

  <!-- Bottom note -->
  <rect x="150" y="475" width="400" height="35" rx="5" fill="#4a1e1e" stroke="#ff6b6b" stroke-width="1"/>
  <text x="350" y="497" text-anchor="middle" font-size="12" fill="#ff6b6b">MDL은 Row Lock과 독립적으로 동작 - SELECT도 MDL 획득!</text>
</svg>